<html>
  <head>
    <title>Embed example</title>
  </head>
  <script type="text/javascript">

    window.baseUrl = "https://covid-19.sledilnik.org/embed.html#/"
    //window.baseUrl = "http://localhost:8080/embed.html#/"

    window.addEventListener("message", function(event) {
      if (event.data.type === "embed-size") {
        console.log("resize event recieved", event.data)
        var iframe = document.querySelector("iframe[name='" + event.data.name + "']");
        if (iframe != null) {
          iframe.style.height = event.data.height + "px";
        }
      }
    });

  </script>
  <body>
    <label for="vizs">Vizualizacija:</label>
    <select id="vizs">
      <option value="chart/MetricsComparison" selected>MetricsComparison</option>
      <option value="chart/Cases">Cases</option>
      <option value="chart/Patients">Patients</option>
      <option value="chart/IcuPatients">IcuPatients</option>
      <option value="chart/CarePatients">CarePatients</option>
      <option value="chart/Ratios">Ratios</option>
      <option value="chart/Tests">Tests</option>
      <option value="chart/HCenters">HCenters</option>
      <option value="chart/Infections">Infections</option>
      <option value="chart/Spread">Spread</option>
      <option value="chart/Regions">Regions</option>
      <option value="chart/Map">Map</option>
      <option value="chart/RegionMap">RegionMap</option>
      <option value="chart/EuropeMap">EuropeMap</option>
      <option value="chart/WorldMap">WorldMap</option>
      <option value="chart/Municipalities">Municipalities</option>
      <option value="chart/AgeGroupsTimeline">AgeGroupsTimeline</option>
      <option value="chart/AgeGroups">AgeGroups</option>
      <option value="chart/Countries">Countries</option>
    </select> 
    <iframe id="myFrame" frameBorder="0" width="100%" height="0" name="my-iframe" src=""></iframe> 

    <script>

      function reloadIframe() {
        path = document.getElementById('vizs').value;
        document.getElementById('myFrame').src = window.baseUrl + path;
      }

      document.getElementById('vizs').addEventListener("change", function(e) {
        document.getElementById('myFrame').style.height = '0px';
        reloadIframe()
      });

      reloadIframe()
    </script>
  </body>
</html>
