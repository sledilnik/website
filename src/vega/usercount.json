{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "title": "ocena števila uporabnikov, ki so objavili ključe na posamezen dan",
  "width": 700,
  "height": 250,
  "data": {
    "url": "https://ostanizdrav.sledilnik.org/plots/data.json"
  },
  "transform": [
    {
      "window": [
        {
          "op": "sum",
          "field": "users_published",
          "as": "sum_published"
        }
      ]
    }
  ],
  "layer": [
    {
      "encoding": {
        "x": {
          "title": "datum",
          "timeUnit": "utcmonthdate",
          "field": "date",
          "type": "temporal"
        },
        "y": {
          "field": "users_published",
          "type": "quantitative",
          "axis": {
            "title": "uporabnikov, ki so objavili ključe na dan",
            "titleColor": "steelblue"
          }
        },
        "text": {
          "field": "users_published",
          "type": "quantitative"
        }
      },
      "layer": [
        {
          "mark": {
            "type": "bar"
          }
        },
        {
          "mark": {
            "type": "text",
            "color": "steelblue",
            "align": "right",
            "baseline": "middle",
            "fontSize": 9,
            "angle": 90,
            "dx": -3,
            "dy": -4
          }
        }
      ]
    },
    {
      "encoding": {
        "x": {
          "timeUnit": "utcmonthdate",
          "field": "date",
          "type": "temporal",
          "axis": {
            "labelAngle": 0,
            "tickCount": "week",
            "labelExpr": "[timeFormat(datum.value, '%d'), timeFormat(datum.value, '%d') <= '07' ? timeFormat(datum.value, '%b') : '']",
            "gridDash": {
              "condition": {
                "test": {
                  "field": "value",
                  "timeUnit": "day",
                  "equal": 1
                },
                "value": []
              },
              "value": [
                2,
                2
              ]
            },
            "tickDash": {
              "condition": {
                "test": {
                  "field": "value",
                  "timeUnit": "day",
                  "equal": 1
                },
                "value": []
              },
              "value": [
                2,
                2
              ]
            }
          }
        },
        "y": {
          "field": "sum_published",
          "type": "quantitative",
          "axis": {
            "title": "uporabnikov, ki so objavili ključe skupaj",
            "titleColor": "#b4464b"
          }
        },
        "text": {
          "field": "sum_published",
          "type": "quantitative"
        }
      },
      "layer": [
        {
          "mark": {
            "type": "line",
            "interpolate": "monotone",
            "point": {
              "color": "#b4464b"
            },
            "color": "#b4464b"
          }
        }
      ]
    }
  ],
  "resolve": {
    "scale": {
      "y": "independent"
    }
  }
}